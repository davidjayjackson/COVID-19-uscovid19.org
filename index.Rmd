---
title: "United States COVID-19 Analysis"
author: "David J Jackson"
date: "Apr. 13,2020 03:10PM  EDT"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(fig.width=9, fig.height=6)
library(tidyverse)
library(RSQLite)
```
```{r,echo=FALSE}
rm(list=ls())
#these libraries are necessary
#create the URL where the dataset is stored with automatic upDates every day
db <- dbConnect(SQLite(), dbname="../COVIDDB/CORVID.sqlite3")
```
```{r,echo=FALSE}
US <- dbGetQuery(db, "SELECT Countries,Reported,Cases,Deaths FROM ECDC 
                 WHERE Countries ='USA'")
US$Reported <- as.Date(US$Reported)

```

## US Cases  and Deaths by Date
 * Data Source: European Centre for Disease Prevention and Control
 * URL: https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide

```{r,echo=FALSE}
ggplot(US) + geom_col(aes(x=Reported,y=Cases,fill=Cases)) +
  theme(axis.text.x = element_text(angle = 45)) +
      labs(title="US COVID-19: Cases by Date",x="Date Reported",y="Total Cases") 
 
```
```{r,echo=FALSE}
ggplot(US) + geom_col(aes(x=Reported,y=Deaths,fill=Deaths)) +
  theme(axis.text.x = element_text(angle = 45)) +
      labs(title="US COVID-19: Deaths by Date",x="Date Reported",y="Total Deaths")
```

### US Accumulated Daily Total: Cases and Deaths

* Data Source: John Hopkins Coronavirus Resource Center
* URL: https://coronavirus.jhu.edu/map.html

```{r,echo=FALSE}
JHU_US<- dbGetQuery(db, "SELECT country,Date,confirmed,deaths,recovered FROM JHUDATA
                     WHERE country='US';")
colnames(JHU_US) <- c("Countries","Date","Cases","Deaths","Recovered")
JHU_US$Date <- as.Date(JHU_US$Date)
```

```{r,echo=FALSE}
ggplot(JHU_US) + geom_col(aes(x=Date,y=Cases,fill=Cases)) +
  theme(axis.text.x = element_text(angle = 45)) +
      labs(title="USA COVID-19: Total Confirmed Cases by Date",x="Date Reported",y="Total Cases") + scale_y_continuous(labels = scales::comma) +
  scale_fill_gradient(low="#56B1F7",high="#132B43", labels = scales::comma)
```
```{r,echo=FALSE}
ggplot(JHU_US) + geom_col(aes(x=Date,y=Deaths,fill=Deaths)) +
  theme(axis.text.x = element_text(angle = 45)) +
      labs(title="US COVID-19: Total  Deaths by Date",x="Date Reported",y="Total Deaths") + 
  scale_y_continuous(labels = scales::comma)


