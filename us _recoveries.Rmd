---
title: "US COVID-19 Recoveries"
author: "David J Jackson"
date: "4/24/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(RSQLite)
library(scales)
library(plotly)
```
```{r}
db <- dbConnect(SQLite(), dbname="../COVIDDB/CORVID.sqlite3")
```
```{r}
US <- dbGetQuery(db, "SELECT * FROM JHUDATA 
                 WHERE country ='US'")
US$date <- as.Date(US$date)

US <- US%>% mutate(daily_deaths = deaths - lag(deaths))
US <- US%>% mutate(daily_cases = confirmed - lag(confirmed))
US <- US%>% mutate(daily_recovery = recovered - lag(recovered))
```

#### US Recoveries  by Date (Daily and Accumliated)

```{r}
plot1 <- US %>% ggplot() + geom_line(aes(x=date,y=recovered),lwd=1) + 
  labs(title="US Accumliated Recoveries to Date",
       capton="(Source: https://coronavirus.jhu.edu/map.html")  
   
  
ggplotly(plot1)
```
```{r}
plot2 <- US %>% ggplot() + geom_line(aes(x=date,y=daily_recovery),lwd=1) + 
  labs(title="US Daily Recoveries by Date",
       caption="(https://coronavirus.jhu.edu/map.html)")
ggplotly(plot2)
```

#### US Recoveries  by Date (Daily and Accumliated)


```{r}
US %>% ggplot() + geom_col(aes(x=date,y=recovered)) + 
  labs(title="US Accumliated Recoveries to Date",
       y="Log of  Recoveries",
       caption="(https://coronavirus.jhu.edu/map.html)") +
  scale_y_log10()

```
```{r}
US %>% ggplot() + geom_col(aes(x=date,y=daily_recovery)) + 
  labs(title="US Daily Recoveries by Date",
       y="Log of  Recoveries",
       caption="(https://coronavirus.jhu.edu/map.html)") +
  scale_y_log10()
