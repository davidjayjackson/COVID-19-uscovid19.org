---
title: "United States COVID-19 Vaccine Rollout"
author: "David Jackson"
date: "2/7/2021 1:50 PM/EST"
output: 
  html_document: 
    fig_width: 9
    fig_height: 7
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,message = FALSE,warning = FALSE)
library(ggplot2)
library(scales)
library(RSQLite)
library(plotly)
library(dplyr)
library(tidyr)
library(forecast)
# theme_set(theme_linedraw() + theme(panel.grid = element_line(linetype = 'dashed')))
theme_set(theme_light())
```

## Sweden COVID-19 Rollout
### Our World In Data: http://ourworldindata.org
### Definitions:
* **total_vaccinations**, Total number of COVID-19 vaccination doses administered.
* **people_vaccinated**, Total number of people who received at least one vaccine dose.
* **people_fully_vaccinated**,Total number of people who received all doses prescribed by the vaccination protocol.
* **new_vaccinations**, New COVID-19 vaccination doses administered (only calculated for consecutive days)
* **new_vaccinations_smoothed**, New COVID-19 vaccination doses administered (7-day smoothed). For countries that don't report vaccination data on a daily basis, we assume that vaccination changed equally on a daily basis over any periods in which no data was reported. This produces a complete series of daily figures, which is then averaged over a rolling 7-day window.
* **total_vaccinations_per_hundred**, Total number of COVID-19 vaccination doses administered per 100 people in the total population.
* **people_vaccinated_per_hundred**, Total number of people who received at least one vaccine dose per 100 people in the total population.
* **people_fully_vaccinated_per_hundred**, Total number of people who received all doses prescribed by the vaccination protocol per 100 people in the total population.
* **new_vaccinations_smoothed_per_million**, New COVID-19 vaccination doses administered (7-day smoothed) per 1,000,000 people in the total population.

```{r}
rm(list=ls())

db <- db <- dbConnect(RSQLite::SQLite(),dbname= "../COVID-19-DB/OURWORLD.sqlite3")
SWE <- dbGetQuery(db,"select * from OWID where location ='United States'")
SWE$date <- as.Date(SWE$date)
```
```{r}
vac <- SWE %>% filter(date >="2020-12-25") %>% 
  select(date,total_vaccinations,people_vaccinated, people_fully_vaccinated,
         new_vaccinations, new_vaccinations_smoothed,total_vaccinations_per_hundred,
         people_vaccinated_per_hundred, people_fully_vaccinated_per_hundred,
         new_vaccinations_smoothed_per_million )
```
### Individual Plot for Each Type of Vaccination

#### total_vaccinations
*Total number of COVID-19 vaccination doses administered.

```{r}

p1 <- SWE %>% filter(date>="2021-01-27") %>% ggplot() + geom_col(aes(x=date,y=total_vaccinations)) +
  scale_y_continuous(labels=comma) +
  labs(title="total_vaccinations")
ggplotly(p1)
```

#### people_vaccinated
* Total number of people who received at least one vaccine dose.

```{r}
p2 <- SWE %>% filter(date>="2021-01-27") %>% ggplot() + geom_col(aes(x=date,y=people_vaccinated)) +
  scale_y_continuous(labels=comma) +
  labs(title="people_vaccinated")
ggplotly(p2)
```

#### people_fully_vaccinated
* Total number of people who received all doses prescribed by the vaccination protocol.

```{r}
p3 <- SWE %>% filter(date>="2021-01-17") %>% ggplot() + geom_col(aes(x=date,y=people_fully_vaccinated)) +
  scale_y_continuous(labels=comma) +
  labs(title="people_fully_vaccinated")
ggplotly(p3)
```

#### new_vaccinations
* New COVID-19 vaccination doses administered (only calculated for consecutive days).

```{r}
p4 <- SWE %>% filter(date>="2021-01-17") %>% ggplot() + geom_col(aes(x=date,y=new_vaccinations)) +
  scale_y_continuous(labels=comma) +
  labs(title="new_vaccinations")
ggplotly(p4)
```

#### new_vaccinations_smoothed
*  New COVID-19 vaccination doses administered (7-day smoothed). For countries that don't report vaccination data on a daily basis, we assume that vaccination changed equally on a daily basis over any periods in which no data was reported. This produces a complete series of daily figures, which is then averaged over a rolling 7-day window.

```{r}
p5 <- SWE %>% filter(date>="2021-01-01") %>% ggplot() + geom_col(aes(x=date,y=new_vaccinations_smoothed)) +
  scale_y_continuous(labels=comma) +
  labs(title="new_vaccinations_smoothed")
ggplotly(p5)
```

#### total_vaccinations_per_hundred
*  Total number of COVID-19 vaccination doses administered per 100 people in the total population.

```{r}
p6 <- SWE %>% filter(date>="2021-01-27") %>% ggplot() + geom_col(aes(x=date,y=total_vaccinations_per_hundred)) +
  scale_y_continuous(labels=comma) +
  labs(title="total_vaccinations_per_hundred")
ggplotly(p6)
```

#### people_vaccinated_per_hundred
*  Total number of people who received at least one vaccine dose per 100 people in the total population.

```{r}
p7 <-SWE %>% filter(date>="2021-01-27") %>% ggplot() + geom_col(aes(x=date,y=people_vaccinated_per_hundred)) +
  scale_y_continuous(labels=comma) +
  labs(title="people_vaccinated_per_hundred")
ggplotly(p7)
```

#### people_fully_vaccinated_per_hundred
*  Total number of people who received all doses prescribed by the vaccination protocol per 100 people in the total population.

```{r}
p8 <- SWE %>% filter(date>="2021-01-27") %>% ggplot() + geom_col(aes(x=date,y=people_fully_vaccinated_per_hundred)) +
  scale_y_continuous(labels=comma) +
  labs(title="people_fully_vaccinated_per_hundred")
ggplotly(p8)
```

#### new_vaccinations_smoothed_per_million
*   New COVID-19 vaccination doses administered (7-day smoothed) per 1,000,000 people in the total population.

```{r}
p9 <- SWE %>% filter(date>="2021-01-01") %>% ggplot() + geom_col(aes(x=date,y=new_vaccinations_smoothed_per_million)) +
  scale_y_continuous(labels=comma) +
  labs(title="new_vaccinations_smoothed_per_million")
ggplotly(p9)
```